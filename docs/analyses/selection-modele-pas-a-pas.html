<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>guide-R - 23&nbsp; Sélection pas à pas d’un modèle</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../analyses/estimations-marginales.html" rel="next">
<link href="../analyses/regression-logistique-binaire.html" rel="prev">
<link href="../ressources/favicon.png" rel="icon" type="image/png">
<script src="../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-8BT7D9P85Y"></script><script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-8BT7D9P85Y', { 'anonymize_ip': true});
</script><script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"fr"
  });
});
</script><style>html{ scroll-behavior: smooth; }</style>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script><link rel="stylesheet" href="../styles.css">
</head>
<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../analyses/ggplot2.html"><strong>Analyses</strong></a></li><li class="breadcrumb-item"><a href="../analyses/selection-modele-pas-a-pas.html"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Sélection pas à pas d’un modèle</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../ressources/typewriter.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none"></a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">guide-R</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/larmarange/guide-R/" title="Code source" class="quarto-navigation-tool px-1" aria-label="Code source"><i class="bi bi-github"></i></a>
    <a href="../guide-R.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
</div>
    <div id="quarto-search" class="quarto-navigation-tool px-1" title="Recherche"></div>
</div>
    </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Préface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text"><strong>Bases du langage</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bases/packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Packages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bases/vecteurs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Vecteurs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bases/listes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Listes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bases/tableaux_donnees.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Tableaux de données</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bases/tibbles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Tibbles</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bases/attributs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Attributs</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text"><strong>Manipulation de données</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/pipe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Le pipe</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/dplyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title"><code>dplyr</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/facteurs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Facteurs et <code>forcats</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/combiner-variables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Combiner plusieurs variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/etiquettes-variables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Étiquettes de variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/etiquettes-valeurs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Étiquettes de valeurs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/valeurs-manquantes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Valeurs manquantes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/import-export.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Import &amp; Export de données</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/formater-nombre.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Mettre en forme des nombres</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/couleurs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Couleurs &amp; Palettes</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text"><strong>Analyses</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses/ggplot2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Graphiques avec <code>ggplot2</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses/statistique-univariee.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Statistique univariée &amp; Intervalles de confiance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses/statistique-bivariee.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Statistique bivariée &amp; Tests de comparaison</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses/likert.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Échelles de Likert</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses/regression-lineaire.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Régression linéaire</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses/regression-logistique-binaire.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Régression logistique binaire</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses/selection-modele-pas-a-pas.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Sélection pas à pas d’un modèle</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses/estimations-marginales.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Prédictions marginales, contrastes marginaux &amp; effets marginaux</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses/contrastes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Contrastes (variables catégorielles)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses/interactions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Interactions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses/multicolinearite.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Multicolinéarité</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text"><strong>Données pondérées avec <code>survey</code></strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../donnees_ponderees/plan-echantillonnage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Définir un plan d’échantillonnage</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../donnees_ponderees/manipulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Manipulation de données pondérées</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../donnees_ponderees/analyses-bivariees.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Analyses uni- et bivariées pondérées</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../donnees_ponderees/graphiques-ponderes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Graphiques pondérés</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../donnees_ponderees/regression-logistique-binaire-ponderee.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Régression logistique binaire pondérée</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text"><strong>Manipulation avancée</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation_avancee/fusion_tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Fusion de tables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation_avancee/dates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Dates avec <code>lubridate</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation_avancee/stringr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Chaînes de texte avec <code>stringr</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation_avancee/tidyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Réorganisation avec <code>tidyr</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation_avancee/conditions-logiques.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Conditions logiques</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation_avancee/transformations-multiples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Transformations multiples</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text"><strong>Analyses avancées</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses_avancees/analyse-factorielle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Analyse factorielle</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses_avancees/classification-ascendante-hierarchique.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Classification ascendante hiérarchique</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses_avancees/regression-logistique-multinomiale.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Régression logistique multinomiale</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses_avancees/regression-logistique-ordinale.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Régression logistique ordinale</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses_avancees/modeles-comptage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Modèles de comptage (Poisson &amp; apparentés)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses_avancees/modeles-incidence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Modèles d’incidence / de taux</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses_avancees/modeles-zero-inflated.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Modèles de comptage <em>zero-inflated</em> et <em>hurdle</em></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses_avancees/choix-modele.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Quel modèle choisir&nbsp;?</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text"><strong>Pour aller plus loin</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../extra/ressources-documentaires.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Ressources documentaires</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table des matières</h2>
   
  <ul>
<li><a href="#donn%C3%A9es-dillustration" id="toc-données-dillustration" class="nav-link active" data-scroll-target="#donn%C3%A9es-dillustration"><span class="header-section-number">23.1</span> Données d’illustration</a></li>
  <li><a href="#pr%C3%A9sentation-de-laic" id="toc-présentation-de-laic" class="nav-link" data-scroll-target="#pr%C3%A9sentation-de-laic"><span class="header-section-number">23.2</span> Présentation de l’AIC</a></li>
  <li><a href="#s%C3%A9lection-pas-%C3%A0-pas-descendante" id="toc-sélection-pas-à-pas-descendante" class="nav-link" data-scroll-target="#s%C3%A9lection-pas-%C3%A0-pas-descendante"><span class="header-section-number">23.3</span> Sélection pas à pas descendante</a></li>
  <li><a href="#s%C3%A9lection-pas-%C3%A0-pas-ascendante" id="toc-sélection-pas-à-pas-ascendante" class="nav-link" data-scroll-target="#s%C3%A9lection-pas-%C3%A0-pas-ascendante"><span class="header-section-number">23.4</span> Sélection pas à pas ascendante</a></li>
  <li><a href="#forcer-certaines-variables-dans-le-mod%C3%A8le-r%C3%A9duit" id="toc-forcer-certaines-variables-dans-le-modèle-réduit" class="nav-link" data-scroll-target="#forcer-certaines-variables-dans-le-mod%C3%A8le-r%C3%A9duit"><span class="header-section-number">23.5</span> Forcer certaines variables dans le modèle réduit</a></li>
  <li><a href="#minimisation-du-bic" id="toc-minimisation-du-bic" class="nav-link" data-scroll-target="#minimisation-du-bic"><span class="header-section-number">23.6</span> Minimisation du BIC</a></li>
  <li><a href="#afficher-les-indicateurs-de-performance" id="toc-afficher-les-indicateurs-de-performance" class="nav-link" data-scroll-target="#afficher-les-indicateurs-de-performance"><span class="header-section-number">23.7</span> Afficher les indicateurs de performance</a></li>
  <li><a href="#sec-step-avec-na" id="toc-sec-step-avec-na" class="nav-link" data-scroll-target="#sec-step-avec-na"><span class="header-section-number">23.8</span> Sélection pas à pas et valeurs manquantes</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/larmarange/guide-R/blob/main/analyses/selection-modele-pas-a-pas.qmd" class="toc-action"><i class="bi bi-github"></i>Voir la source</a></li><li><a href="https://github.com/larmarange/guide-R/issues/new" class="toc-action"><i class="bi empty"></i>Faire part d'un problème</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../analyses/ggplot2.html"><strong>Analyses</strong></a></li><li class="breadcrumb-item"><a href="../analyses/selection-modele-pas-a-pas.html"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Sélection pas à pas d’un modèle</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-selection-modele-pas-a-pas" class="quarto-section-identifier"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Sélection pas à pas d’un modèle</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>Il est toujours tentant lorsque l’on recherche les facteurs associés à un phénomène d’inclure un nombre important de variables explicatives potentielles dans son modèle de régression. Cependant, un tel modèle n’est pas forcément le plus efficace et certaines variables n’auront probablement pas d’effet significatif sur la variable d’intérêt.</p>
<p>Un autre problème potentiel est celui dur <a href="https://fr.wikipedia.org/wiki/Surapprentissage">sur-ajustement ou surappentissage</a>. Un modèle sur-ajusté est un modèle statistique qui contient plus de paramètres que ne peuvent le justifier les données. Dès lors, il va être trop ajusté aux données observées mais perdre en capacité de généralisation.</p>
<p>Pour une présentation didactique du cadre théorique de la sélection de modèle, vous pouvez consulter en ligne le <a href="https://perso.univ-rennes2.fr/system/files/users/rouviere_l/chapitre3_glm.pdf">cours de L. Rouvière sur la sélection/validation de modèles</a>.</p>
<p>Les techniques de sélection pas à pas sont des approches visant à <q>améliorer</q>un modèle explicatif. On part d’un modèle initial puis on regarde s’il est possible d’améliorer le modèle en ajoutant ou en supprimant une des variables du modèle pour obtenir un nouveau modèle. Le processus est répété jusqu’à obtenir un modèle final que l’on ne peut plus améliorer.</p>
<section id="données-dillustration" class="level2" data-number="23.1"><h2 data-number="23.1" class="anchored" data-anchor-id="données-dillustration">
<span class="header-section-number">23.1</span> Données d’illustration</h2>
<p>Pour illustrer ce chapitre, nous allons prendre un modèle logistique inspiré de celui utilisé dans le chapitre sur la régression logistique binaire (cf. <a href="regression-logistique-binaire.html" class="quarto-xref"><span>Chapitre 22</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(labelled)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">theme_gtsummary_language</span>(</span>
<span id="cb1-5"><a href="#cb1-5"></a>  <span class="st">"fr"</span>,</span>
<span id="cb1-6"><a href="#cb1-6"></a>  <span class="at">decimal.mark =</span> <span class="st">","</span>,</span>
<span id="cb1-7"><a href="#cb1-7"></a>  <span class="at">big.mark =</span> <span class="st">" "</span></span>
<span id="cb1-8"><a href="#cb1-8"></a>)</span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="fu">data</span>(hdv2003, <span class="at">package =</span> <span class="st">"questionr"</span>)</span>
<span id="cb1-11"><a href="#cb1-11"></a></span>
<span id="cb1-12"><a href="#cb1-12"></a>d <span class="ot">&lt;-</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>  hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb1-14"><a href="#cb1-14"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1-15"><a href="#cb1-15"></a>    <span class="at">sexe =</span> sexe <span class="sc">|&gt;</span> <span class="fu">fct_relevel</span>(<span class="st">"Femme"</span>),</span>
<span id="cb1-16"><a href="#cb1-16"></a>    <span class="at">groupe_ages =</span> age <span class="sc">|&gt;</span></span>
<span id="cb1-17"><a href="#cb1-17"></a>      <span class="fu">cut</span>(</span>
<span id="cb1-18"><a href="#cb1-18"></a>        <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">25</span>, <span class="dv">45</span>, <span class="dv">65</span>, <span class="dv">99</span>),</span>
<span id="cb1-19"><a href="#cb1-19"></a>        <span class="at">right =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1-20"><a href="#cb1-20"></a>        <span class="at">include.lowest =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-21"><a href="#cb1-21"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"18-24 ans"</span>, <span class="st">"25-44 ans"</span>,</span>
<span id="cb1-22"><a href="#cb1-22"></a>                   <span class="st">"45-64 ans"</span>, <span class="st">"65 ans et plus"</span>)</span>
<span id="cb1-23"><a href="#cb1-23"></a>      ),</span>
<span id="cb1-24"><a href="#cb1-24"></a>    <span class="at">etudes =</span> nivetud <span class="sc">|&gt;</span> </span>
<span id="cb1-25"><a href="#cb1-25"></a>      <span class="fu">fct_recode</span>(</span>
<span id="cb1-26"><a href="#cb1-26"></a>        <span class="st">"Primaire"</span> <span class="ot">=</span> <span class="st">"N'a jamais fait d'etudes"</span>,</span>
<span id="cb1-27"><a href="#cb1-27"></a>        <span class="st">"Primaire"</span> <span class="ot">=</span> <span class="st">"A arrete ses etudes, avant la derniere annee d'etudes primaires"</span>,</span>
<span id="cb1-28"><a href="#cb1-28"></a>        <span class="st">"Primaire"</span> <span class="ot">=</span> <span class="st">"Derniere annee d'etudes primaires"</span>,</span>
<span id="cb1-29"><a href="#cb1-29"></a>        <span class="st">"Secondaire"</span> <span class="ot">=</span> <span class="st">"1er cycle"</span>,</span>
<span id="cb1-30"><a href="#cb1-30"></a>        <span class="st">"Secondaire"</span> <span class="ot">=</span> <span class="st">"2eme cycle"</span>,</span>
<span id="cb1-31"><a href="#cb1-31"></a>        <span class="st">"Technique / Professionnel"</span> <span class="ot">=</span> <span class="st">"Enseignement technique ou professionnel court"</span>,</span>
<span id="cb1-32"><a href="#cb1-32"></a>        <span class="st">"Technique / Professionnel"</span> <span class="ot">=</span> <span class="st">"Enseignement technique ou professionnel long"</span>,</span>
<span id="cb1-33"><a href="#cb1-33"></a>        <span class="st">"Supérieur"</span> <span class="ot">=</span> <span class="st">"Enseignement superieur y compris technique superieur"</span></span>
<span id="cb1-34"><a href="#cb1-34"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb1-35"><a href="#cb1-35"></a>    <span class="fu">fct_na_value_to_level</span>(<span class="st">"Non documenté"</span>)  </span>
<span id="cb1-36"><a href="#cb1-36"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb1-37"><a href="#cb1-37"></a>  <span class="fu">set_variable_labels</span>(</span>
<span id="cb1-38"><a href="#cb1-38"></a>    <span class="at">sport =</span> <span class="st">"Pratique un sport ?"</span>,</span>
<span id="cb1-39"><a href="#cb1-39"></a>    <span class="at">sexe =</span> <span class="st">"Sexe"</span>,</span>
<span id="cb1-40"><a href="#cb1-40"></a>    <span class="at">groupe_ages =</span> <span class="st">"Groupe d'âges"</span>,</span>
<span id="cb1-41"><a href="#cb1-41"></a>    <span class="at">etudes =</span> <span class="st">"Niveau d'études"</span>,</span>
<span id="cb1-42"><a href="#cb1-42"></a>    <span class="at">relig =</span> <span class="st">"Rapport à la religion"</span>,</span>
<span id="cb1-43"><a href="#cb1-43"></a>    <span class="at">lecture.bd =</span> <span class="st">"Lit des bandes dessinées ?"</span></span>
<span id="cb1-44"><a href="#cb1-44"></a>  )</span>
<span id="cb1-45"><a href="#cb1-45"></a></span>
<span id="cb1-46"><a href="#cb1-46"></a>mod <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb1-47"><a href="#cb1-47"></a>  sport <span class="sc">~</span> sexe <span class="sc">+</span> groupe_ages <span class="sc">+</span> etudes <span class="sc">+</span> relig <span class="sc">+</span> lecture.bd,</span>
<span id="cb1-48"><a href="#cb1-48"></a>  <span class="at">family =</span> binomial,</span>
<span id="cb1-49"><a href="#cb1-49"></a>  <span class="at">data =</span> d</span>
<span id="cb1-50"><a href="#cb1-50"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="présentation-de-laic" class="level2" data-number="23.2"><h2 data-number="23.2" class="anchored" data-anchor-id="présentation-de-laic">
<span class="header-section-number">23.2</span> Présentation de l’AIC</h2>
<p>Il faut définir un critère pour déterminer la qualité d’un modèle. L’un des plus utilisés est le <em>Akaike Information Criterion</em> ou AIC. Il s’agit d’un compromis entre le nombre de degrés de liberté (e.g.&nbsp;le nombre de coefficients dans le modèle) que l’on cherche à minimiser et la variance expliquée que l’on cherche à maximiser (la vraisemblance).</p>
<p>Plus précisément <span class="math inline">\(AIC=2k-2ln(L)\)</span> où <span class="math inline">\(L\)</span> est le maximum de la fonction de vraisemblance du modèle et <span class="math inline">\(k\)</span> le nombre de paramètres (i.e.&nbsp;de coefficients) du modèle. Plus l’AIC sera faible, meilleur sera le modèle.</p>
<p>L’AIC d’un modèle s’obtient aisément avec <code><a href="https://rdrr.io/r/stats/AIC.html">AIC()</a></code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">AIC</span>(mod)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2257.101</code></pre>
</div>
</div>
</section><section id="sélection-pas-à-pas-descendante" class="level2 page-columns page-full" data-number="23.3"><h2 data-number="23.3" class="anchored" data-anchor-id="sélection-pas-à-pas-descendante">
<span class="header-section-number">23.3</span> Sélection pas à pas descendante</h2>
<p>La fonction <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code> permet de sélectionner le meilleur modèle par une procédure pas à pas descendante basée sur la minimisation de l’AIC. La fonction affiche à l’écran les différentes étapes de la sélection et renvoie le modèle final.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>mod2 <span class="ot">&lt;-</span> <span class="fu">step</span>(mod)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=2257.1
sport ~ sexe + groupe_ages + etudes + relig + lecture.bd

              Df Deviance    AIC
- relig        5   2231.9 2251.9
- lecture.bd   1   2227.9 2255.9
&lt;none&gt;             2227.1 2257.1
- sexe         1   2245.6 2273.6
- groupe_ages  3   2280.1 2304.1
- etudes       4   2375.5 2397.5

Step:  AIC=2251.95
sport ~ sexe + groupe_ages + etudes + lecture.bd

              Df Deviance    AIC
- lecture.bd   1   2232.6 2250.6
&lt;none&gt;             2231.9 2251.9
- sexe         1   2248.8 2266.8
- groupe_ages  3   2282.1 2296.1
- etudes       4   2380.5 2392.5

Step:  AIC=2250.56
sport ~ sexe + groupe_ages + etudes

              Df Deviance    AIC
&lt;none&gt;             2232.6 2250.6
- sexe         1   2249.2 2265.2
- groupe_ages  3   2282.5 2294.5
- etudes       4   2385.2 2395.2</code></pre>
</div>
</div>
<p>Le modèle initial a un AIC de 2257,1.</p>
<p>À la première étape, il apparaît que la suppression de la variable <em>relig</em> permettrait diminuer l’AIC à 2251,9 et la suppression de la variable <em>lecture.bd</em> de le diminuer à 2255,9. Le gain maximal est obtenu en supprimant <em>relig</em> et donc cette variable est supprimée à ce stade. On peut noter que la suppression de la variable entraîne <em>de facto</em> une augmentation des résidus (colonne <em>Deviance</em>) et donc une baisse de la vraisemblance du modèle, mais cela est compensé par la réduction du nombre de degrés de liberté.</p>
<p>Le processus est maintenant répété. À la seconde étape, supprimer <em>lecture.bd</em> permettrait de diminuer encore l’AIC à 2250,6 et cette variable est supprimée.</p>
<p>À la troisième étape, tout retrait d’une variable additionnelle reviendrait à augmenter l’AIC.</p>
<p>Lors de la seconde étape, toute suppression d’une autre variable ferait augmenter l’AIC. La procédure s’arrête donc.</p>
<p>L’objet <code>mod2</code> renvoyé par <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code> est le modèle final.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>mod2</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:  glm(formula = sport ~ sexe + groupe_ages + etudes, family = binomial, 
    data = d)

Coefficients:
                    (Intercept)                        sexeHomme  
                        -1.2815                           0.4234  
           groupe_ages25-44 ans             groupe_ages45-64 ans  
                        -0.3012                          -0.9261  
      groupe_ages65 ans et plus                 etudesSecondaire  
                        -1.2696                           0.9670  
etudesTechnique / Professionnel                  etudesSupérieur  
                         1.0678                           1.9955  
            etudesNon documenté  
                         2.3192  

Degrees of Freedom: 1999 Total (i.e. Null);  1991 Residual
Null Deviance:      2617 
Residual Deviance: 2233     AIC: 2251</code></pre>
</div>
</div>
<p>On peut effectuer une analyse de variance ou ANOVA pour comparer les deux modèles avec la fonction <code><a href="https://rdrr.io/r/stats/anova.html">anova()</a></code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">anova</span>(mod, mod2, <span class="at">test =</span> <span class="st">"Chisq"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table

Model 1: sport ~ sexe + groupe_ages + etudes + relig + lecture.bd
Model 2: sport ~ sexe + groupe_ages + etudes
  Resid. Df Resid. Dev Df Deviance Pr(&gt;Chi)
1      1985     2227.1                     
2      1991     2232.6 -6  -5.4597   0.4863</code></pre>
</div>
</div>
<p>Il n’y a pas de différences significatives entre nos deux modèles (p=0,55). Autrement dit, notre second modèle explique tout autant de variance que notre premier modèle, tout en étant plus parcimonieux.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Astuce
</div>
</div>
<div class="callout-body-container callout-body">
<p>Une alternative à la fonction <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code> est la fonction <code><a href="https://rdrr.io/pkg/MASS/man/stepAIC.html">MASS::stepAIC()</a></code> du package <a href="http://www.stats.ox.ac.uk/pub/MASS4/">MASS</a> qui fonctionne de la même manière. Si cela ne change rien aux régressions logistiques classiques, il arrive que pour certains types de modèle la méthode <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code> ne soit pas disponible, mais que <code><a href="https://rdrr.io/pkg/MASS/man/stepAIC.html">MASS::stepAIC()</a></code> puisse être utilisée à la place.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">library</span>(MASS)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attachement du package : 'MASS'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>L'objet suivant est masqué depuis 'package:gtsummary':

    select</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>L'objet suivant est masqué depuis 'package:dplyr':

    select</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>mod2bis <span class="ot">&lt;-</span> <span class="fu">stepAIC</span>(mod)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=2257.1
sport ~ sexe + groupe_ages + etudes + relig + lecture.bd

              Df Deviance    AIC
- relig        5   2231.9 2251.9
- lecture.bd   1   2227.9 2255.9
&lt;none&gt;             2227.1 2257.1
- sexe         1   2245.6 2273.6
- groupe_ages  3   2280.1 2304.1
- etudes       4   2375.5 2397.5

Step:  AIC=2251.95
sport ~ sexe + groupe_ages + etudes + lecture.bd

              Df Deviance    AIC
- lecture.bd   1   2232.6 2250.6
&lt;none&gt;             2231.9 2251.9
- sexe         1   2248.8 2266.8
- groupe_ages  3   2282.1 2296.1
- etudes       4   2380.5 2392.5

Step:  AIC=2250.56
sport ~ sexe + groupe_ages + etudes

              Df Deviance    AIC
&lt;none&gt;             2232.6 2250.6
- sexe         1   2249.2 2265.2
- groupe_ages  3   2282.5 2294.5
- etudes       4   2385.2 2395.2</code></pre>
</div>
</div>
</div>
</div>
<p>On peut facilement comparer visuellement deux modèles avec <code><a href="https://larmarange.github.io/ggstats/reference/ggcoef_model.html">ggstats::ggcoef_compare()</a></code> de <a href="https://larmarange.github.io/ggstats/">ggstats</a>.</p>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">library</span>(ggstats)</span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="fu">ggcoef_compare</span>(</span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="fu">list</span>(<span class="st">"modèle complet"</span> <span class="ot">=</span> mod, <span class="st">"modèle réduit"</span> <span class="ot">=</span> mod2), </span>
<span id="cb16-4"><a href="#cb16-4"></a>  <span class="at">exponentiate =</span> <span class="cn">TRUE</span></span>
<span id="cb16-5"><a href="#cb16-5"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-comparaison-modeles-dodge" class="quarto-figure quarto-figure-center quarto-float anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full"><div aria-describedby="fig-comparaison-modeles-dodge-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="selection-modele-pas-a-pas_files/figure-html/fig-comparaison-modeles-dodge-1.png" class="lightbox" data-glightbox="description: .lightbox-desc-1" data-gallery="quarto-lightbox-gallery-1"><img src="selection-modele-pas-a-pas_files/figure-html/fig-comparaison-modeles-dodge-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-comparaison-modeles-dodge-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;23.1: Comparaison visuelle des deux modèles (<em>dodge</em>)
</figcaption></figure>
</div>
</div>
</div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">ggcoef_compare</span>(</span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="fu">list</span>(<span class="st">"modèle complet"</span> <span class="ot">=</span> mod, <span class="st">"modèle réduit"</span> <span class="ot">=</span> mod2), </span>
<span id="cb17-3"><a href="#cb17-3"></a>  <span class="at">type =</span> <span class="st">"faceted"</span>,</span>
<span id="cb17-4"><a href="#cb17-4"></a>  <span class="at">exponentiate =</span> <span class="cn">TRUE</span></span>
<span id="cb17-5"><a href="#cb17-5"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-comparaison-modeles-faceted" class="quarto-figure quarto-figure-center quarto-float anchored page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full"><div aria-describedby="fig-comparaison-modeles-faceted-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="selection-modele-pas-a-pas_files/figure-html/fig-comparaison-modeles-faceted-1.png" class="lightbox" data-glightbox="description: .lightbox-desc-2" data-gallery="quarto-lightbox-gallery-2"><img src="selection-modele-pas-a-pas_files/figure-html/fig-comparaison-modeles-faceted-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-fig margin-caption" id="fig-comparaison-modeles-faceted-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;23.2: Comparaison visuelle des deux modèles (<em>faceted</em>)
</figcaption></figure>
</div>
</div>
</div>
</section><section id="sélection-pas-à-pas-ascendante" class="level2" data-number="23.4"><h2 data-number="23.4" class="anchored" data-anchor-id="sélection-pas-à-pas-ascendante">
<span class="header-section-number">23.4</span> Sélection pas à pas ascendante</h2>
<p>Pour une approche ascendante, nous allons partir d’un modèle vide, c’est-à-dire d’un modèle sans variable explicative avec simplement un intercept.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>mod_vide <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb18-2"><a href="#cb18-2"></a>  sport <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="at">family =</span> binomial,</span>
<span id="cb18-4"><a href="#cb18-4"></a>  <span class="at">data =</span> d</span>
<span id="cb18-5"><a href="#cb18-5"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nous allons ensuite passer ce modèle vide à <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code> et préciser, via un élément nommé <em>upper</em> dans une liste passée à l’argument <code>scope</code>, la formule du modèle maximum à considérer. Nous précisons <code>direction = "forward"</code> pour indiquer que nous souhaitons une procédure ascendante.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>mod3 <span class="ot">&lt;-</span> <span class="fu">step</span>(</span>
<span id="cb19-2"><a href="#cb19-2"></a>  mod_vide,</span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="at">direction =</span> <span class="st">"forward"</span>,</span>
<span id="cb19-4"><a href="#cb19-4"></a>  <span class="at">scope =</span> <span class="fu">list</span>(</span>
<span id="cb19-5"><a href="#cb19-5"></a>    <span class="at">upper =</span> <span class="sc">~</span> sexe <span class="sc">+</span> groupe_ages <span class="sc">+</span> etudes <span class="sc">+</span> relig <span class="sc">+</span> lecture.bd</span>
<span id="cb19-6"><a href="#cb19-6"></a>  )</span>
<span id="cb19-7"><a href="#cb19-7"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=2619.11
sport ~ 1

              Df Deviance    AIC
+ etudes       4   2294.9 2304.9
+ groupe_ages  3   2405.4 2413.4
+ sexe         1   2600.2 2604.2
+ lecture.bd   1   2612.7 2616.7
&lt;none&gt;             2617.1 2619.1
+ relig        5   2608.8 2620.8

Step:  AIC=2304.92
sport ~ etudes

              Df Deviance    AIC
+ groupe_ages  3   2249.2 2265.2
+ sexe         1   2282.5 2294.5
&lt;none&gt;             2294.9 2304.9
+ lecture.bd   1   2294.7 2306.7
+ relig        5   2293.0 2313.0

Step:  AIC=2265.17
sport ~ etudes + groupe_ages

             Df Deviance    AIC
+ sexe        1   2232.6 2250.6
&lt;none&gt;            2249.2 2265.2
+ lecture.bd  1   2248.8 2266.8
+ relig       5   2246.0 2272.0

Step:  AIC=2250.56
sport ~ etudes + groupe_ages + sexe

             Df Deviance    AIC
&lt;none&gt;            2232.6 2250.6
+ lecture.bd  1   2231.9 2251.9
+ relig       5   2227.9 2255.9</code></pre>
</div>
</div>
<p>Cette fois-ci, à chaque étape, la fonction <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code> évalue le gain à ajouter chaque variable dans le modèle, ajoute la variable la plus pertinente, pour recommence le processus jusqu’à ce qu’il n’y ait plus de gain à ajouter une variable au modèle. Notons que nous aboutissons ici au même résultat.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Astuce
</div>
</div>
<div class="callout-body-container callout-body">
<p>Nous aurions pu nous passer de préciser <code>direction = "forward"</code>. Dans cette situation, <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code> regarde simultanément les gains à ajouter une variable additionnelle au modèle et à supprimer une variable déjà inclue pour . Lorsque l’on part d’un modèle vide, cela ne change rien au résultat.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>mod3 <span class="ot">&lt;-</span> <span class="fu">step</span>(</span>
<span id="cb21-2"><a href="#cb21-2"></a>  mod_vide,</span>
<span id="cb21-3"><a href="#cb21-3"></a>  <span class="at">scope =</span> <span class="fu">list</span>(</span>
<span id="cb21-4"><a href="#cb21-4"></a>    <span class="at">upper =</span> <span class="sc">~</span> sexe <span class="sc">+</span> groupe_ages <span class="sc">+</span> etudes <span class="sc">+</span> relig <span class="sc">+</span> lecture.bd</span>
<span id="cb21-5"><a href="#cb21-5"></a>  )</span>
<span id="cb21-6"><a href="#cb21-6"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=2619.11
sport ~ 1

              Df Deviance    AIC
+ etudes       4   2294.9 2304.9
+ groupe_ages  3   2405.4 2413.4
+ sexe         1   2600.2 2604.2
+ lecture.bd   1   2612.7 2616.7
&lt;none&gt;             2617.1 2619.1
+ relig        5   2608.8 2620.8

Step:  AIC=2304.92
sport ~ etudes

              Df Deviance    AIC
+ groupe_ages  3   2249.2 2265.2
+ sexe         1   2282.5 2294.5
&lt;none&gt;             2294.9 2304.9
+ lecture.bd   1   2294.7 2306.7
+ relig        5   2293.0 2313.0
- etudes       4   2617.1 2619.1

Step:  AIC=2265.17
sport ~ etudes + groupe_ages

              Df Deviance    AIC
+ sexe         1   2232.6 2250.6
&lt;none&gt;             2249.2 2265.2
+ lecture.bd   1   2248.8 2266.8
+ relig        5   2246.0 2272.0
- groupe_ages  3   2294.9 2304.9
- etudes       4   2405.4 2413.4

Step:  AIC=2250.56
sport ~ etudes + groupe_ages + sexe

              Df Deviance    AIC
&lt;none&gt;             2232.6 2250.6
+ lecture.bd   1   2231.9 2251.9
+ relig        5   2227.9 2255.9
- sexe         1   2249.2 2265.2
- groupe_ages  3   2282.5 2294.5
- etudes       4   2385.2 2395.2</code></pre>
</div>
</div>
</div>
</div>
</section><section id="forcer-certaines-variables-dans-le-modèle-réduit" class="level2" data-number="23.5"><h2 data-number="23.5" class="anchored" data-anchor-id="forcer-certaines-variables-dans-le-modèle-réduit">
<span class="header-section-number">23.5</span> Forcer certaines variables dans le modèle réduit</h2>
<p>Même si l’on a recourt à <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code>, on peut vouloir forcer la présence de certaines variables dans le modèle, même si leur suppression minimiserait l’AIC. Par exemple, si l’on a des hypothèses spécifiques pour ces variables et que l’on a intérêt à montrer qu’elles n’ont pas d’effet dans le modèle multivariable.</p>
<p>Supposons que nous avons une hypothèse sur le lien entre la pratique d’un sport et la lecture de bandes dessinées. Nous souhaitons donc forcer la présence de la variable <em>lecture.bd</em> dans le modèle final. Cette fois-ci, nous allons indiquer, via la liste passée à <code>scope</code>, un élément <em>lower</em> indiquant le modèle minimum souhaité. Toutes les variables de ce modèle minimum seront donc conserver dans le modèle final.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>mod4 <span class="ot">&lt;-</span> <span class="fu">step</span>(</span>
<span id="cb23-2"><a href="#cb23-2"></a>  mod,</span>
<span id="cb23-3"><a href="#cb23-3"></a>  <span class="at">scope =</span> <span class="fu">list</span>(</span>
<span id="cb23-4"><a href="#cb23-4"></a>    <span class="at">lower =</span> <span class="sc">~</span> lecture.bd</span>
<span id="cb23-5"><a href="#cb23-5"></a>  )</span>
<span id="cb23-6"><a href="#cb23-6"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=2257.1
sport ~ sexe + groupe_ages + etudes + relig + lecture.bd

              Df Deviance    AIC
- relig        5   2231.9 2251.9
&lt;none&gt;             2227.1 2257.1
- sexe         1   2245.6 2273.6
- groupe_ages  3   2280.1 2304.1
- etudes       4   2375.5 2397.5

Step:  AIC=2251.95
sport ~ sexe + groupe_ages + etudes + lecture.bd

              Df Deviance    AIC
&lt;none&gt;             2231.9 2251.9
- sexe         1   2248.8 2266.8
- groupe_ages  3   2282.1 2296.1
- etudes       4   2380.5 2392.5</code></pre>
</div>
</div>
<p>Cette fois-ci, nous constatons que la fonction <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code> n’a pas considéré la suppression éventuelle de la variable <em>lecture.bd</em> qui est donc conservée.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>mod4<span class="sc">$</span>formula</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>sport ~ sexe + groupe_ages + etudes + lecture.bd</code></pre>
</div>
</div>
</section><section id="minimisation-du-bic" class="level2" data-number="23.6"><h2 data-number="23.6" class="anchored" data-anchor-id="minimisation-du-bic">
<span class="header-section-number">23.6</span> Minimisation du BIC</h2>
<p>Un critère similaire à l’AIC est le critère BIC (<em>Bayesian Information Criterion</em>) appelé aussi SBC (<em>Schwarz information criterion</em>).</p>
<p>Sa formule est proche de celle de l’AIC&nbsp;: <span class="math inline">\(BIC=ln(n)k-2ln(L)\)</span> où <span class="math inline">\(n\)</span> correspond au nombre d’observations dans l’échantillon. Par rapport à l’AIC, il pénalise donc plus le nombre de degrés de liberté du modèle.</p>
<p>Pour réaliser une sélection pas à pas par optimisation du BIC, on appellera <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code> en ajoutant l’argument <code>k = log(n)</code> où <code>n</code> est le nombre d’observations inclues dans le modèle. Par défaut, un modèle est calculé en retirant les observations pour lesquelles des données sont manquantes. Dès lors, pour obtenir le nombre exact d’observations incluses dans le modèle, on peut utiliser la syntaxe <code>mod |&gt; model.matrix() |&gt; nrow()</code>, <code><a href="https://rdrr.io/r/stats/model.matrix.html">model.matrix()</a></code> renvoyant la matrice de données ayant servi au calcul du modèle et <code><a href="https://rdrr.io/r/base/nrow.html">nrow()</a></code> le nombre de lignes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>mod5 <span class="ot">&lt;-</span> mod <span class="sc">|&gt;</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>  <span class="fu">step</span>(</span>
<span id="cb27-3"><a href="#cb27-3"></a>    <span class="at">k =</span> mod <span class="sc">|&gt;</span> <span class="fu">model.matrix</span>() <span class="sc">|&gt;</span> <span class="fu">nrow</span>() <span class="sc">|&gt;</span> <span class="fu">log</span>()</span>
<span id="cb27-4"><a href="#cb27-4"></a>  )</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=2341.11
sport ~ sexe + groupe_ages + etudes + relig + lecture.bd

              Df Deviance    AIC
- relig        5   2231.9 2308.0
- lecture.bd   1   2227.9 2334.3
&lt;none&gt;             2227.1 2341.1
- sexe         1   2245.6 2352.0
- groupe_ages  3   2280.1 2371.3
- etudes       4   2375.5 2459.1

Step:  AIC=2307.96
sport ~ sexe + groupe_ages + etudes + lecture.bd

              Df Deviance    AIC
- lecture.bd   1   2232.6 2301.0
&lt;none&gt;             2231.9 2308.0
- sexe         1   2248.8 2317.2
- groupe_ages  3   2282.1 2335.3
- etudes       4   2380.5 2426.1

Step:  AIC=2300.97
sport ~ sexe + groupe_ages + etudes

              Df Deviance    AIC
&lt;none&gt;             2232.6 2301.0
- sexe         1   2249.2 2310.0
- groupe_ages  3   2282.5 2328.1
- etudes       4   2385.2 2423.2</code></pre>
</div>
</div>
</section><section id="afficher-les-indicateurs-de-performance" class="level2 page-columns page-full" data-number="23.7"><h2 data-number="23.7" class="anchored" data-anchor-id="afficher-les-indicateurs-de-performance">
<span class="header-section-number">23.7</span> Afficher les indicateurs de performance</h2>
<p>Il existe plusieurs indicateurs de <q>performance</q> ou <q>qualité</q> d’un modèle. Pour les calculer/afficher (dont l’AIC et le BIC), on pourra avoir recours à <code><a href="https://generics.r-lib.org/reference/glance.html">broom::glance()</a></code> ou encore à <code><a href="https://easystats.github.io/performance/reference/model_performance.html">performance::model_performance()</a></code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>mod <span class="sc">|&gt;</span> broom<span class="sc">::</span><span class="fu">glance</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 8
  null.deviance df.null logLik   AIC   BIC deviance df.residual  nobs
          &lt;dbl&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;int&gt; &lt;int&gt;
1         2617.    1999 -1114. 2257. 2341.    2227.        1985  2000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>mod <span class="sc">|&gt;</span> performance<span class="sc">::</span><span class="fu">model_performance</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Indices of model performance

AIC      |     AICc |      BIC | Tjur's R2 |  RMSE | Sigma | Log_loss | Score_log | Score_spherical |   PCP
-----------------------------------------------------------------------------------------------------------
2257.101 | 2257.343 | 2341.115 |     0.183 | 0.434 | 1.000 |    0.557 |      -Inf |           0.001 | 0.623</code></pre>
</div>
</div>
<p>Le fonction <code><a href="https://easystats.github.io/performance/reference/compare_performance.html">performance::compare_performance()</a></code> permet de comparer rapidement plusieurs modèles.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>performance<span class="sc">::</span><span class="fu">compare_performance</span>(mod, mod2, mod4)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Comparison of Model Performance Indices

Name | Model |  AIC (weights) | AICc (weights) |  BIC (weights) | Tjur's R2 |  RMSE | Sigma | Log_loss | Score_log | Score_spherical |   PCP
--------------------------------------------------------------------------------------------------------------------------------------------
mod  |   glm | 2257.1 (0.025) | 2257.3 (0.023) | 2341.1 (&lt;.001) |     0.183 | 0.434 | 1.000 |    0.557 |      -Inf |           0.001 | 0.623
mod2 |   glm | 2250.6 (0.651) | 2250.7 (0.654) | 2301.0 (0.971) |     0.181 | 0.435 | 1.000 |    0.558 |      -Inf |           0.002 | 0.622
mod4 |   glm | 2252.0 (0.325) | 2252.1 (0.323) | 2308.0 (0.029) |     0.181 | 0.435 | 1.000 |    0.558 |      -Inf |           0.002 | 0.622</code></pre>
</div>
</div>
<p>Si l’on souhaite afficher l’AIC (ainsi que d’autres statistiques globales du modèle) en note du tableau des coefficients, on pourra utiliser <code><a href="https://www.danieldsjoberg.com/gtsummary/reference/add_glance.html">gtsummary::add_glance_source_note()</a></code>.</p>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>mod2 <span class="sc">|&gt;</span> </span>
<span id="cb35-2"><a href="#cb35-2"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb35-3"><a href="#cb35-3"></a>  <span class="fu">bold_labels</span>() <span class="sc">|&gt;</span> </span>
<span id="cb35-4"><a href="#cb35-4"></a>  <span class="fu">add_glance_source_note</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-regression-logistique-glance_source_note" class="cell quarto-float anchored page-columns page-full">
<figure class="quarto-float quarto-float-tbl figure page-columns page-full"><div aria-describedby="tbl-regression-logistique-glance_source_note-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="fkcevnbfpq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#fkcevnbfpq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#fkcevnbfpq thead, #fkcevnbfpq tbody, #fkcevnbfpq tfoot, #fkcevnbfpq tr, #fkcevnbfpq td, #fkcevnbfpq th {
  border-style: none;
}

#fkcevnbfpq p {
  margin: 0;
  padding: 0;
}

#fkcevnbfpq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fkcevnbfpq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#fkcevnbfpq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fkcevnbfpq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fkcevnbfpq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fkcevnbfpq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fkcevnbfpq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fkcevnbfpq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fkcevnbfpq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fkcevnbfpq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fkcevnbfpq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fkcevnbfpq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fkcevnbfpq .gt_spanner_row {
  border-bottom-style: hidden;
}

#fkcevnbfpq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#fkcevnbfpq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fkcevnbfpq .gt_from_md > :first-child {
  margin-top: 0;
}

#fkcevnbfpq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fkcevnbfpq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fkcevnbfpq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#fkcevnbfpq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fkcevnbfpq .gt_row_group_first td {
  border-top-width: 2px;
}

#fkcevnbfpq .gt_row_group_first th {
  border-top-width: 2px;
}

#fkcevnbfpq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fkcevnbfpq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#fkcevnbfpq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fkcevnbfpq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fkcevnbfpq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fkcevnbfpq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fkcevnbfpq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#fkcevnbfpq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fkcevnbfpq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fkcevnbfpq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fkcevnbfpq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fkcevnbfpq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fkcevnbfpq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fkcevnbfpq .gt_left {
  text-align: left;
}

#fkcevnbfpq .gt_center {
  text-align: center;
}

#fkcevnbfpq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fkcevnbfpq .gt_font_normal {
  font-weight: normal;
}

#fkcevnbfpq .gt_font_bold {
  font-weight: bold;
}

#fkcevnbfpq .gt_font_italic {
  font-style: italic;
}

#fkcevnbfpq .gt_super {
  font-size: 65%;
}

#fkcevnbfpq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#fkcevnbfpq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fkcevnbfpq .gt_indent_1 {
  text-indent: 5px;
}

#fkcevnbfpq .gt_indent_2 {
  text-indent: 10px;
}

#fkcevnbfpq .gt_indent_3 {
  text-indent: 15px;
}

#fkcevnbfpq .gt_indent_4 {
  text-indent: 20px;
}

#fkcevnbfpq .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="<strong>Caractéristique</strong>"><strong>Caractéristique</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>OR</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>">
<strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>95% IC</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>">
<strong>95% IC</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span>
</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>p-valeur</strong>"><strong>p-valeur</strong></th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="label" class="gt_row gt_left" style="font-weight: bold;">Sexe</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Femme</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Homme</td>
<td headers="estimate" class="gt_row gt_center">1,53</td>
<td headers="ci" class="gt_row gt_center">1,25 – 1,87</td>
<td headers="p.value" class="gt_row gt_center">&lt;0,001</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left" style="font-weight: bold;">Groupe d'âges</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;18-24 ans</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;25-44 ans</td>
<td headers="estimate" class="gt_row gt_center">0,74</td>
<td headers="ci" class="gt_row gt_center">0,48 – 1,15</td>
<td headers="p.value" class="gt_row gt_center">0,2</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;45-64 ans</td>
<td headers="estimate" class="gt_row gt_center">0,40</td>
<td headers="ci" class="gt_row gt_center">0,25 – 0,62</td>
<td headers="p.value" class="gt_row gt_center">&lt;0,001</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;65 ans et plus</td>
<td headers="estimate" class="gt_row gt_center">0,28</td>
<td headers="ci" class="gt_row gt_center">0,17 – 0,47</td>
<td headers="p.value" class="gt_row gt_center">&lt;0,001</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left" style="font-weight: bold;">Niveau d'études</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Primaire</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Secondaire</td>
<td headers="estimate" class="gt_row gt_center">2,63</td>
<td headers="ci" class="gt_row gt_center">1,80 – 3,88</td>
<td headers="p.value" class="gt_row gt_center">&lt;0,001</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Technique / Professionnel</td>
<td headers="estimate" class="gt_row gt_center">2,91</td>
<td headers="ci" class="gt_row gt_center">2,03 – 4,22</td>
<td headers="p.value" class="gt_row gt_center">&lt;0,001</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Supérieur</td>
<td headers="estimate" class="gt_row gt_center">7,36</td>
<td headers="ci" class="gt_row gt_center">5,10 – 10,8</td>
<td headers="p.value" class="gt_row gt_center">&lt;0,001</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;Non documenté</td>
<td headers="estimate" class="gt_row gt_center">10,2</td>
<td headers="ci" class="gt_row gt_center">5,43 – 19,4</td>
<td headers="p.value" class="gt_row gt_center">&lt;0,001</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes"><tr>
<td class="gt_sourcenote" colspan="4">déviance nulle = 2 617; degrés de liberté du modèle nul = 1 999; Log-likelihood = -1 116; AIC = 2 251; BIC = 2 301; Deviance = 2 233; degrés de liberté des résidus = 1 991; No. Obs. = 2 000</td>
    </tr></tfoot>
<tfoot class="gt_footnotes"><tr>
<td class="gt_footnote" colspan="4">
<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = rapport de cotes, IC = intervalle de confiance</td>
    </tr></tfoot>
</table>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-margin quarto-float-caption quarto-float-tbl margin-caption" id="tbl-regression-logistique-glance_source_note-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;23.1: Modèle obtenu après réduction du nombre de variables
</figcaption></figure>
</div>
</div>
</section><section id="sec-step-avec-na" class="level2 page-columns page-full" data-number="23.8"><h2 data-number="23.8" class="anchored" data-anchor-id="sec-step-avec-na">
<span class="header-section-number">23.8</span> Sélection pas à pas et valeurs manquantes</h2>
<p>Si certaines de nos variables explications contiennent des valeurs manquantes (<code>NA</code>), cela peut entraîner des erreurs au moment d’avoir recours à <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code>, car le nombre d’observations dans le modèle va changer si on retire du modèle une variable explicative avec des valeurs manquantes.</p>
<p>Prenons un exemple, en ajoutant des valeurs manquantes à la variable <em>relig</em> (pour cela nous allons recoder les refus et les ne sait pas en <code>NA</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>d<span class="sc">$</span>relig_na <span class="ot">&lt;-</span> </span>
<span id="cb36-2"><a href="#cb36-2"></a>  d<span class="sc">$</span>relig <span class="sc">|&gt;</span> </span>
<span id="cb36-3"><a href="#cb36-3"></a>  <span class="fu">fct_recode</span>(</span>
<span id="cb36-4"><a href="#cb36-4"></a>    <span class="at">NULL =</span> <span class="st">"Rejet"</span>,</span>
<span id="cb36-5"><a href="#cb36-5"></a>    <span class="at">NULL =</span> <span class="st">"NSP ou NVPR"</span></span>
<span id="cb36-6"><a href="#cb36-6"></a>  )</span>
<span id="cb36-7"><a href="#cb36-7"></a></span>
<span id="cb36-8"><a href="#cb36-8"></a>mod_na <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb36-9"><a href="#cb36-9"></a>  sport <span class="sc">~</span> sexe <span class="sc">+</span> groupe_ages <span class="sc">+</span> etudes <span class="sc">+</span> relig_na <span class="sc">+</span> lecture.bd,</span>
<span id="cb36-10"><a href="#cb36-10"></a>  <span class="at">family =</span> binomial,</span>
<span id="cb36-11"><a href="#cb36-11"></a>  <span class="at">data =</span> d</span>
<span id="cb36-12"><a href="#cb36-12"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Au moment d’exécuter <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code> nous obtenons l’erreur mentionnée précédemment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">step</span>(mod_na)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=2096.64
sport ~ sexe + groupe_ages + etudes + relig_na + lecture.bd

              Df Deviance    AIC
- relig_na     3   2073.2 2093.2
- lecture.bd   1   2072.2 2096.2
&lt;none&gt;             2070.6 2096.6
- sexe         1   2088.6 2112.6
- groupe_ages  3   2118.0 2138.0
- etudes       4   2218.1 2236.1</code></pre>
</div>
<div class="cell-output cell-output-error">
<pre><code>Error in step(mod_na): le nombre de lignes utilisées a changé : supprimer les valeurs manquantes ?</code></pre>
</div>
</div>
<p>Pas d’inquiétude&nbsp;! Il y a moyen de s’en sortir en adoptant la stratégie suivante&nbsp;:</p>
<ol type="1">
<li>créer une copie du jeu de données avec uniquement des observations sans valeur manquante pour nos variables explicatives&nbsp;;</li>
<li>calculer notre modèle complet à partir de ce jeu de données&nbsp;;</li>
<li>appliquer <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code>&nbsp;;</li>
<li>recalculer le modèle réduit en repartant du jeu de données complet.</li>
</ol>
<p>Première étape, ne garder que les observations complètes à l’aide de <code><a href="https://tidyr.tidyverse.org/reference/drop_na.html">tidyr::drop_na()</a></code>, en lui indiquant la liste des variables dans lesquelles vérifier la présence ou non de <code>NA</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>d_complet <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span> </span>
<span id="cb40-2"><a href="#cb40-2"></a>  <span class="fu">drop_na</span>(sexe, groupe_ages, etudes, relig_na, lecture.bd)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Deuxième étape, calculons le modèle complet avec ce jeu données.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>mod_na_alt <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb41-2"><a href="#cb41-2"></a>  sport <span class="sc">~</span> sexe <span class="sc">+</span> groupe_ages <span class="sc">+</span> etudes <span class="sc">+</span> relig_na <span class="sc">+</span>lecture.bd,</span>
<span id="cb41-3"><a href="#cb41-3"></a>  <span class="at">family =</span> binomial,</span>
<span id="cb41-4"><a href="#cb41-4"></a>  <span class="at">data =</span> d_complet</span>
<span id="cb41-5"><a href="#cb41-5"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Le modèle <code>mod_na_alt</code> est tout à fait identique au modèle <code>mod_na</code>, car <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> supprime de lui-même les valeurs manquantes quand elles existent. Nous pouvons maintenant utiliser <code><a href="https://rdrr.io/r/stats/step.html">step()</a></code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>mod_na_reduit <span class="ot">&lt;-</span> <span class="fu">step</span>(mod_na_alt)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=2096.64
sport ~ sexe + groupe_ages + etudes + relig_na + lecture.bd

              Df Deviance    AIC
- relig_na     3   2073.2 2093.2
- lecture.bd   1   2072.2 2096.2
&lt;none&gt;             2070.6 2096.6
- sexe         1   2088.6 2112.6
- groupe_ages  3   2118.0 2138.0
- etudes       4   2218.1 2236.1

Step:  AIC=2093.19
sport ~ sexe + groupe_ages + etudes + lecture.bd

              Df Deviance    AIC
- lecture.bd   1   2074.6 2092.6
&lt;none&gt;             2073.2 2093.2
- sexe         1   2090.2 2108.2
- groupe_ages  3   2118.5 2132.5
- etudes       4   2221.4 2233.4

Step:  AIC=2092.59
sport ~ sexe + groupe_ages + etudes

              Df Deviance    AIC
&lt;none&gt;             2074.6 2092.6
- sexe         1   2091.1 2107.1
- groupe_ages  3   2119.6 2131.6
- etudes       4   2227.2 2237.2</code></pre>
</div>
</div>
<p>Cela s’exécute sans problème car tous les sous-modèles sont calculés à partir de <code>d_complet</code> et donc ont bien le même nombre d’observations. Cependant, dans notre modèle réduit, on a retiré 137 observations en raison d’une valeur manquante sur la variable <em>relig_na</em>, variable qui n’est plus présente dans notre modèle réduit. Il serait donc pertinent de réintégrer ces observations.</p>
<p>Nous allons donc recalculer le modèle réduit mais à partir de <code>d</code>. Inutile de recopier à la main la formule du modèle réduit, car nous pouvons l’obtenir directement avec <code>mod_na_reduit$formula</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>mod_na_reduit2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb44-2"><a href="#cb44-2"></a>  mod_na_reduit<span class="sc">$</span>formula,</span>
<span id="cb44-3"><a href="#cb44-3"></a>  <span class="at">family =</span> binomial,</span>
<span id="cb44-4"><a href="#cb44-4"></a>  <span class="at">data =</span> d</span>
<span id="cb44-5"><a href="#cb44-5"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Attention&nbsp;:</strong> <code>mod_na_reduit</code> et <code>mod_na_reduit2</code> ne sont pas identiques puisque le second a été calculé sur un plus grand nombre d’observations, ce qui change très légèrement les valeurs des coefficients.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Astuce
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pour automatiser l’ensemble de ce processus, on peut copier/coller le code de la fonction générique suivante<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>&nbsp;:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a>step_with_na <span class="ot">&lt;-</span> <span class="cf">function</span>(model,</span>
<span id="cb45-2"><a href="#cb45-2"></a>                         <span class="at">full_data =</span> <span class="cn">NULL</span>, ...) {</span>
<span id="cb45-3"><a href="#cb45-3"></a>  <span class="co"># refit the model without NAs</span></span>
<span id="cb45-4"><a href="#cb45-4"></a>  model_no_na <span class="ot">&lt;-</span> <span class="fu">update</span>(</span>
<span id="cb45-5"><a href="#cb45-5"></a>    model,</span>
<span id="cb45-6"><a href="#cb45-6"></a>    <span class="at">formula =</span> <span class="fu">terms</span>(model),</span>
<span id="cb45-7"><a href="#cb45-7"></a>    <span class="at">data =</span> <span class="fu">model.frame</span>(model))  </span>
<span id="cb45-8"><a href="#cb45-8"></a>  <span class="co"># apply step()</span></span>
<span id="cb45-9"><a href="#cb45-9"></a>  model_simplified <span class="ot">&lt;-</span> <span class="fu">step</span>(model_no_na, ...)</span>
<span id="cb45-10"><a href="#cb45-10"></a>  <span class="co"># recompute simplified model using full data</span></span>
<span id="cb45-11"><a href="#cb45-11"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(full_data)) {</span>
<span id="cb45-12"><a href="#cb45-12"></a>    <span class="fu">update</span>(model,</span>
<span id="cb45-13"><a href="#cb45-13"></a>           <span class="at">formula =</span> <span class="fu">terms</span>(model_simplified))</span>
<span id="cb45-14"><a href="#cb45-14"></a>  } <span class="cf">else</span> {</span>
<span id="cb45-15"><a href="#cb45-15"></a>    <span class="fu">update</span>(model,</span>
<span id="cb45-16"><a href="#cb45-16"></a>           <span class="at">formula =</span> <span class="fu">terms</span>(model_simplified),</span>
<span id="cb45-17"><a href="#cb45-17"></a>           <span class="at">data =</span> full_data)</span>
<span id="cb45-18"><a href="#cb45-18"></a>  }</span>
<span id="cb45-19"><a href="#cb45-19"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Elle réalise l’ensemble des opérations décrites plus haut en profitant de la flexibilité offerte par la fonction <code><a href="https://rdrr.io/r/stats/update.html">update()</a></code>. La fonction <code><a href="https://rdrr.io/r/stats/model.frame.html">model.frame()</a></code> permet de récupérer le jeu de données utilisé par un modèle (et dans lequel les lignes incomplètes ont été supprimées). La fonction <code><a href="https://rdrr.io/r/stats/terms.html">terms()</a></code> permet de récupérer l’équation du modèle.</p>
<p><strong>Attention :</strong> il s’agit d’une fonction expérimentale et elle n’est peut-être pas compatible avec tous les types de modèles. Elle a été testée avec les modèles <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code>, <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> et <code><a href="https://rdrr.io/pkg/nnet/man/multinom.html">nnet::multinom()</a></code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>mod_na_reduit_direct <span class="ot">&lt;-</span> <span class="fu">step_with_na</span>(mod_na, <span class="at">trace =</span> <span class="dv">0</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Le résultat obtenu est strictement identique.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="fu">anova</span>(mod_na_reduit2, mod_na_reduit_direct)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table

Model 1: sport ~ sexe + groupe_ages + etudes
Model 2: sport ~ sexe + groupe_ages + etudes
  Resid. Df Resid. Dev Df Deviance Pr(&gt;Chi)
1      1991     2232.6                     
2      1991     2232.6  0        0         </code></pre>
</div>
</div>
</div>
</div>


<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;L’argument <code>full_data</code> peut-être utile lorsque le jeu de données n’est pas disponible dans l’environnement parent, par exemple lorsque l’on imbrique des calculs avec <code><a href="https://rdrr.io/r/base/lapply.html">lapply()</a></code> ou <code>purrr:map()</code>. On pourra lors passer manuellement le jeu de données complet à la fonction.</p></div></div><div class="hidden" aria-hidden="true">
<span class="glightbox-desc lightbox-desc-1">Figure&nbsp;23.1: Comparaison visuelle des deux modèles (<em>dodge</em>)</span>
<span class="glightbox-desc lightbox-desc-2">Figure&nbsp;23.2: Comparaison visuelle des deux modèles (<em>faceted</em>)</span>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><script src="https://giscus.app/client.js" data-repo="larmarange/guide-R" data-repo-id="R_kgDOH6-xnw" data-category="Forum" data-category-id="DIC_kwDOH6-xn84CRLQy" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="fr" crossorigin="anonymous" data-loading="lazy" async="">
</script><input type="hidden" id="giscus-base-theme" value="light"><input type="hidden" id="giscus-alt-theme" value="dark"><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../analyses/regression-logistique-binaire.html" class="pagination-link" aria-label="Régression logistique binaire">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Régression logistique binaire</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../analyses/estimations-marginales.html" class="pagination-link" aria-label="Prédictions marginales, contrastes marginaux &amp; effets marginaux">
        <span class="nav-page-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Prédictions marginales, contrastes marginaux &amp; effets marginaux</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
<li class="nav-item">
 guide-R : Guide pour l'analyse de données d'enquêtes avec R
  </li>  
</ul>
</div>   
    <div class="nav-footer-center">

<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/larmarange/guide-R/blob/main/analyses/selection-modele-pas-a-pas.qmd" class="toc-action"><i class="bi bi-github"></i>Voir la source</a></li><li><a href="https://github.com/larmarange/guide-R/issues/new" class="toc-action"><i class="bi empty"></i>Faire part d'un problème</a></li></ul></div><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
      <i class="bi bi-badge-cc-fill" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link active" href="https://github.com/larmarange/guide-R/" aria-current="page">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/c/webinR">
      <i class="bi bi-youtube" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://larmarange.github.io/analyse-R/">
<p>analyse-R</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://larmarange.github.io/webin-R/">
<p>webin-R</p>
</a>
  </li>  
</ul>
</div>
  </div>
</footer><script>var lightboxQuarto = GLightbox({"descPosition":"bottom","loop":false,"selector":".lightbox","closeEffect":"zoom","openEffect":"zoom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>


<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>