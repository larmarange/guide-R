<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>guide-R - 12&nbsp; Étiquettes de valeurs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../manipulation/valeurs-manquantes.html" rel="next">
<link href="../manipulation/etiquettes-variables.html" rel="prev">
<link href="../ressources/favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer"
  }
}</script><style>html{ scroll-behavior: smooth; }</style>
<link rel="stylesheet" href="../styles.css">
</head>
<body class="nav-sidebar floating slimcontent">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Étiquettes de valeurs</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../ressources/typewriter.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none"></a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">guide-R</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/larmarange/guide-R/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="../guide-R.pdf" title="Download PDF" class="sidebar-tool px-1"><i class="bi bi-file-pdf"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
<li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Préface</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true"><strong>Bases du langage</strong></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bases/packages.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bases/vecteurs.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Vecteurs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bases/listes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Listes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bases/tableaux_donnees.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Tableaux de données</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bases/tibbles.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Tibbles</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bases/attributs.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Attributs</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true"><strong>Manipulation de données</strong></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/pipe.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Le pipe</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/dplyr.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title"><code>dplyr</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/facteurs.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Facteurs et <code>forcats</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/combiner-variables.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Combiner plusieurs variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/etiquettes-variables.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Étiquettes de variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/etiquettes-valeurs.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Étiquettes de valeurs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/valeurs-manquantes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Valeurs manquantes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation/import-export.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Import &amp; Export de données</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true"><strong>Analyses</strong></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses/ggplot2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Graphiques avec <code>ggplot2</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses/statistique-univariee.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Statistique univariée &amp; Intervalles de confiance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analyses/statistique-bivariee.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Statistique bivariée &amp; Tests de comparaison</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true"><strong>Manipulation avancée</strong></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation_avancee/dates.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Dates avec <code>lubridate</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../manipulation_avancee/tidyr.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Réorganisation avec <code>tidyr</code></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table des matières</h2>
   
  <ul>
<li><a href="#la-classe-haven_labelled" id="toc-la-classe-haven_labelled" class="nav-link active" data-scroll-target="#la-classe-haven_labelled"><span class="toc-section-number">12.1</span>  La classe <code>haven_labelled</code></a></li>
  <li><a href="#manipulation-sur-un-vecteur-une-colonne" id="toc-manipulation-sur-un-vecteur-une-colonne" class="nav-link" data-scroll-target="#manipulation-sur-un-vecteur-une-colonne"><span class="toc-section-number">12.2</span>  Manipulation sur un vecteur / une colonne</a></li>
  <li><a href="#manipulation-sur-un-tableau-de-donn%C3%A9es" id="toc-manipulation-sur-un-tableau-de-données" class="nav-link" data-scroll-target="#manipulation-sur-un-tableau-de-donn%C3%A9es"><span class="toc-section-number">12.3</span>  Manipulation sur un tableau de données</a></li>
  <li>
<a href="#conversion" id="toc-conversion" class="nav-link" data-scroll-target="#conversion"><span class="toc-section-number">12.4</span>  Conversion</a>
  <ul class="collapse">
<li><a href="#quand-convertir-les-vecteurs-labellis%C3%A9s" id="toc-quand-convertir-les-vecteurs-labellisés" class="nav-link" data-scroll-target="#quand-convertir-les-vecteurs-labellis%C3%A9s"><span class="toc-section-number">12.4.1</span>  Quand convertir les vecteurs labellisés ?</a></li>
  <li><a href="#convertir-un-vecteur-labellis%C3%A9-en-facteur" id="toc-convertir-un-vecteur-labellisé-en-facteur" class="nav-link" data-scroll-target="#convertir-un-vecteur-labellis%C3%A9-en-facteur"><span class="toc-section-number">12.4.2</span>  Convertir un vecteur labellisé en facteur</a></li>
  <li><a href="#convertir-un-vecteur-labellis%C3%A9-en-num%C3%A9rique-ou-en-texte" id="toc-convertir-un-vecteur-labellisé-en-numérique-ou-en-texte" class="nav-link" data-scroll-target="#convertir-un-vecteur-labellis%C3%A9-en-num%C3%A9rique-ou-en-texte"><span class="toc-section-number">12.4.3</span>  Convertir un vecteur labellisé en numérique ou en texte</a></li>
  <li><a href="#conversion-conditionnelle-en-facteurs" id="toc-conversion-conditionnelle-en-facteurs" class="nav-link" data-scroll-target="#conversion-conditionnelle-en-facteurs"><span class="toc-section-number">12.4.4</span>  Conversion conditionnelle en facteurs</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/larmarange/guide-R/blob/main/manipulation/etiquettes-valeurs.qmd" class="toc-action">Voir la source</a></p><p><a href="https://github.com/larmarange/guide-R/issues/new" class="toc-action">Faire part d'un problème</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-etiquettes-valeurs" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Étiquettes de valeurs</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><p>Dans le domaine des grandes enquêtes, il est fréquent de coder les variables catégorielles avec des codes numériques auxquels on associé une certaines valeurs. Par exemple, une variable <em>milieu de résidence</em> pourrait être codée 1 pour <q>urbain</q>, 2 pour <q>semi-urbain</q>, 3 pour <q>rural</q> et 9 pour indiquer une donnée manquante. Une variable binaire pourrait quant à elle être codée 0 pour <q>non</q> et 1 pour <q>oui</q>. Souvent, chaque enquête définit ses propres conventions.</p>
<p>Les logiciels statistiques propriétaires <strong>SPSS</strong>, <strong>Stata</strong> et <strong>SAS</strong> ont tous les trois un système d’étiquettes de valeurs pour représenter ce type de variables catégorielles.</p>
<p><strong>R</strong> n’a pas, de manière native, de système d’étiquettes de valeurs. Le format utilisé en interne pour représenter les variables catégorielles est celui des facteurs (cf.&nbsp;<a href="facteurs.html"><span>Chapitre&nbsp;9</span></a>). Cependant, ce dernier ne permet de contrôler comment sont associées une étiquette avec une valeur numérique précise.</p>
<section id="la-classe-haven_labelled" class="level2" data-number="12.1"><h2 data-number="12.1" class="anchored" data-anchor-id="la-classe-haven_labelled">
<span class="header-section-number">12.1</span> La classe <code>haven_labelled</code>
</h2>
<p>Afin d’assurer une importation complète des données depuis <strong>SPSS</strong>, <strong>Stata</strong> et <strong>SAS</strong>, le package <a href="https://haven.tidyverse.org">haven</a> a introduit un nouveau type de vecteurs, la classe <code>haven_labelled</code>, qui permet justement de rendre compte de ces vecteurs labellisés (i.e.&nbsp;avec des étiquettes de valeurs). Le package <a href="http://larmarange.github.io/labelled/">labelled</a> fournie un jeu de fonctions pour faciliter la manipulation des vecteurs labellisés.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Les vecteurs labellisés sont un format intermédiaire qui permets d’importer les données telles qu’elles ont été définies dans le fichier source. Il n’est pas destiné à être utilisé pour l’analyse statistique.</p>
<p>Pour la réalisation de tableaux, graphiques, modèles, <strong>R</strong> attend que les variables catégorielles soit codées sous formes de facteurs, et que les variables continues soient numériques. On aura donc besoin, à un moment ou à un autre, de convertir les vecteurs labellisés en facteurs ou en variables numériques classiques.</p>
</div>
</div>
</section><section id="manipulation-sur-un-vecteur-une-colonne" class="level2" data-number="12.2"><h2 data-number="12.2" class="anchored" data-anchor-id="manipulation-sur-un-vecteur-une-colonne">
<span class="header-section-number">12.2</span> Manipulation sur un vecteur / une colonne</h2>
<p>Pour définir des étiquettes, la fonction de base est <code><a href="http://larmarange.github.io/labelled/reference/val_labels.html">labelled::val_labels()</a></code>. Il est possible de définir des étiquettes de valeurs pour des vecteurs numériques, d’entiers et textuels. On indiquera les étiquettes sous la forme <code>étiquette = valeur</code>. Cette fonction s’utilise de la même manière que <code><a href="http://larmarange.github.io/labelled/reference/var_label.html">labelled::var_label()</a></code> abordée au chapitre précédent (cf.&nbsp;<a href="etiquettes-variables.html"><span>Chapitre&nbsp;11</span></a>). Un appel simple renvoie les étiquettes de valeur associées au vecteur, <code>NULL</code> s’il n’y en n’a pas. Combiner avec l’opérateur d’assignation (<code>&lt;-</code>), on peut ajouter/modifier les étiquettes de valeurs associées au vecteur.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(labelled)</span>
<span id="cb1-2"><a href="#cb1-2"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">9</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a>v</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 1 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">class</span>(v)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">val_labels</span>(v)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">val_labels</span>(v) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">non =</span> <span class="dv">1</span>, <span class="at">oui =</span> <span class="dv">2</span>)</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="fu">val_labels</span>(v)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>non oui 
  1   2 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>v</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;labelled&lt;double&gt;[4]&gt;
[1] 1 2 1 9

Labels:
 value label
     1   non
     2   oui</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">class</span>(v)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "haven_labelled" "vctrs_vctr"     "double"        </code></pre>
</div>
</div>
<p>Comme on peut le voir avec cet exemple simple :</p>
<ul>
<li>l’ajout d’étiquettes de valeurs modifie la class de l’objet (qui est maintenant un vecteur de la classe <code>haven_labelled</code>)&nbsp;;</li>
<li>l’objet obtenu est multi-classes, la classe <code>double</code> indiquant ici qu’il s’agit d’un vecteur numérique&nbsp;;</li>
<li>il n’est pas obligatoire d’associer une étiquette de valeurs à toutes les valeurs observées dans le vecteur (ici, nous n’avons pas défini d’étiquettes pour la valeur <code>9</code>).</li>
</ul>
<p>La fonction <code><a href="http://larmarange.github.io/labelled/reference/val_labels.html">labelled::val_label()</a></code> (notez l’absence d’un s à la fin du nom de la fonction) permet d’accéder / de modifier l’étiquette associée à une valeur spécifique.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">val_label</span>(v, <span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "non"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">val_label</span>(v, <span class="dv">9</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">val_label</span>(v, <span class="dv">9</span>) <span class="ot">&lt;-</span> <span class="st">"(manquant)"</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="fu">val_label</span>(v, <span class="dv">2</span>) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>v</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;labelled&lt;double&gt;[4]&gt;
[1] 1 2 1 9

Labels:
 value      label
     1        non
     9 (manquant)</code></pre>
</div>
</div>
<p>Pour supprimer, toutes les étiquettes de valeurs, on attribuera <code>NULL</code> avec <code><a href="http://larmarange.github.io/labelled/reference/val_labels.html">labelled::val_labels()</a></code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">val_labels</span>(v) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>v</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 1 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">class</span>(v)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<p>On remarquera que, lorsque toutes les étiquettes de valeurs sont supprimées, la nature de l’objet change à nouveau et il redevient un simple vecteur numérique.</p>
<div class="callout-caution callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Mise en garde
</div>
</div>
<div class="callout-body-container callout-body">
<p>Il est essentiel de bien comprendre que l’ajout d’étiquettes de valeurs ne change pas fondamentalement la nature du vecteur. <strong>Cela ne le transforme pas en variable catégorielle.</strong> À ce stade, le vecteur n’a pas été transformé en facteur. Cela reste un vecteur numérique qui est considéré comme tel par <strong>R</strong>. On peut ainsi en calculer une moyenne, ce qui serait impossible avec un facteur.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="fu">val_labels</span>(v) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">non =</span> <span class="dv">1</span>, <span class="at">oui =</span> <span class="dv">2</span>)</span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="fu">mean</span>(v)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>f <span class="ot">&lt;-</span> <span class="fu">factor</span>(v, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"non"</span>, <span class="st">"oui"</span>))</span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="fu">mean</span>(f)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mean.default(f): l'argument n'est ni numérique, ni logique : renvoi
de NA</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</div>
</div>
<p>Les fonctions <code><a href="http://larmarange.github.io/labelled/reference/val_labels.html">labelled::val_labels()</a></code> et <code><a href="http://larmarange.github.io/labelled/reference/val_labels.html">labelled::val_label()</a></code> peuvent également être utilisées sur les colonnes d’un tableau.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>df <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb28-2"><a href="#cb28-2"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb28-3"><a href="#cb28-3"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">9</span>, <span class="dv">3</span>)</span>
<span id="cb28-4"><a href="#cb28-4"></a>)</span>
<span id="cb28-5"><a href="#cb28-5"></a><span class="fu">val_labels</span>(df<span class="sc">$</span>x) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">non =</span> <span class="dv">1</span>, <span class="at">oui =</span> <span class="dv">2</span>)</span>
<span id="cb28-6"><a href="#cb28-6"></a><span class="fu">val_label</span>(df<span class="sc">$</span>y, <span class="dv">9</span>) <span class="ot">&lt;-</span> <span class="st">"(manquant)"</span></span>
<span id="cb28-7"><a href="#cb28-7"></a>df</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  x         y             
  &lt;dbl+lbl&gt; &lt;dbl+lbl&gt;     
1 1 [non]   3             
2 2 [oui]   9 [(manquant)]
3 1 [non]   9 [(manquant)]
4 2 [oui]   3             </code></pre>
</div>
</div>
<p>On pourra noter, que si notre tableau est un <em>tibble</em>, les étiquettes sont rendues dans la console quand on affiche le tableau.</p>
<p>La fonction <code><a href="http://larmarange.github.io/labelled/reference/look_for.html">labelled::look_for()</a></code> est également un bon moyen d’afficher les étiquettes de valeurs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="fu">look_for</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> pos variable label col_type values        
 1   x        —     dbl+lbl  [1] non       
                             [2] oui       
 2   y        —     dbl+lbl  [9] (manquant)</code></pre>
</div>
</div>
</section><section id="manipulation-sur-un-tableau-de-données" class="level2" data-number="12.3"><h2 data-number="12.3" class="anchored" data-anchor-id="manipulation-sur-un-tableau-de-données">
<span class="header-section-number">12.3</span> Manipulation sur un tableau de données</h2>
<p>{labelled} fournie 3 fonctions directement applicables sur un tableau de données&nbsp;: <code><a href="http://larmarange.github.io/labelled/reference/val_labels.html">labelled::set_value_labels()</a></code>, <code><a href="http://larmarange.github.io/labelled/reference/val_labels.html">labelled::add_value_labels()</a></code> et <code><a href="http://larmarange.github.io/labelled/reference/val_labels.html">labelled::remove_value_labels()</a></code>. La première remplace l’ensemble des étiquettes de valeurs associées à une variable, la seconde ajoute des étiquettes de valeurs (et conserve celles déjà définies), la troisième supprime les étiquettes associées à certaines valeurs spécifiques (et laisse les autres inchangées).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb32-2"><a href="#cb32-2"></a>  <span class="fu">look_for</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> pos variable label col_type values        
 1   x        —     dbl+lbl  [1] non       
                             [2] oui       
 2   y        —     dbl+lbl  [9] (manquant)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href="#cb34-2"></a>  <span class="fu">set_value_labels</span>(</span>
<span id="cb34-3"><a href="#cb34-3"></a>    <span class="at">x =</span> <span class="fu">c</span>(<span class="at">yes =</span> <span class="dv">2</span>),</span>
<span id="cb34-4"><a href="#cb34-4"></a>    <span class="at">y =</span> <span class="fu">c</span>(<span class="st">"a répondu"</span> <span class="ot">=</span> <span class="dv">3</span>, <span class="st">"refus de répondre"</span> <span class="ot">=</span> <span class="dv">9</span>)</span>
<span id="cb34-5"><a href="#cb34-5"></a>  )</span>
<span id="cb34-6"><a href="#cb34-6"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb34-7"><a href="#cb34-7"></a>  <span class="fu">look_for</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> pos variable label col_type values               
 1   x        —     dbl+lbl  [2] yes              
 2   y        —     dbl+lbl  [3] a répondu        
                             [9] refus de répondre</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2"></a>  <span class="fu">add_value_labels</span>(</span>
<span id="cb36-3"><a href="#cb36-3"></a>    <span class="at">x =</span> <span class="fu">c</span>(<span class="at">no =</span> <span class="dv">1</span>)</span>
<span id="cb36-4"><a href="#cb36-4"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb36-5"><a href="#cb36-5"></a>  <span class="fu">remove_value_labels</span>(</span>
<span id="cb36-6"><a href="#cb36-6"></a>    <span class="at">y =</span> <span class="dv">9</span></span>
<span id="cb36-7"><a href="#cb36-7"></a>  )</span>
<span id="cb36-8"><a href="#cb36-8"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb36-9"><a href="#cb36-9"></a>  <span class="fu">look_for</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> pos variable label col_type values       
 1   x        —     dbl+lbl  [2] yes      
                             [1] no       
 2   y        —     dbl+lbl  [3] a répondu</code></pre>
</div>
</div>
</section><section id="conversion" class="level2 page-columns page-full" data-number="12.4"><h2 data-number="12.4" class="anchored" data-anchor-id="conversion">
<span class="header-section-number">12.4</span> Conversion</h2>
<section id="quand-convertir-les-vecteurs-labellisés" class="level3 page-columns page-full" data-number="12.4.1"><h3 data-number="12.4.1" class="anchored" data-anchor-id="quand-convertir-les-vecteurs-labellisés">
<span class="header-section-number">12.4.1</span> Quand convertir les vecteurs labellisés ?</h3>
<p>La classe <code>haven_labelled</code> permets d’ajouter des métadonnées aux variables sous la forme d’étiquettes de valeurs. Lorsque les données sont importées depuis <strong>SAS</strong>, <strong>SPSS</strong> ou <strong>Stata</strong>, cela permet notamment de conserver le codage original du fichier importé.</p>
<p>Mais il faut noter que ces <em>étiquettes de valeur</em> n’indique pas pour autant de manière systématique le type de variable (catégorielle ou continue). Les vecteurs labellisés n’ont donc pas vocation à être utilisés pour l’analyse, notamment le calcul de modèles statistiques. Ils doivent être convertis en facteurs (pour les variables catégorielles) ou en vecteurs numériques (pour les variables continues).</p>
<p>La question qui peut se poser est donc de choisir à quel moment cette conversion doit avoir lieu dans un processus d’analyse. On peut considérer deux approches principales.</p>
<div id="fig-conversion-labelled" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full"><p><a href="ressources/conversion_labelled.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Deux approches possibles pour la conversion des étiquettes de valeurs"><img src="ressources/conversion_labelled.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption margin-caption">Figure&nbsp;12.1: Deux approches possibles pour la conversion des étiquettes de valeurs</figcaption><p></p>
</figure>
</div>
<p>Dans l’<strong>approche A</strong>, les vecteurs labellisés sont convertis juste après l’import des données, en utilisant les fonctions <code><a href="http://larmarange.github.io/labelled/reference/to_factor.html">labelled::unlabelled()</a></code>, <code><a href="http://larmarange.github.io/labelled/reference/to_factor.html">labelled::to_factor()</a></code> ou <code><a href="https://rdrr.io/r/base/class.html">base::unclass()</a></code> qui sont présentées ci-après. Dès lors, toute la partie de nettoyage et de recodage des données se fera en utilisant les fonctions classiques de <strong>R</strong>. Si l’on n’a pas besoin de conserver le codage original, cette approche a l’avantage de s’inscrire dans le fonctionnement usuel de <strong>R</strong>.</p>
<p>Dans l’<strong>approche B</strong>, les vecteurs labellisés sont conservés pour l’étape de nettoyage et de recodage des données. Dans ce cas là, on pourra avoir recours aux fonctions de l’extension <a href="http://larmarange.github.io/labelled/">labelled</a> qui facilitent la gestion des données labellisées. Cette approche est particulièrement intéressante quand (i) on veut pouvoir se référer au dictionnaire de codification fourni avec les données sources et donc on veut conserver le codage original et/ou (ii) quand les données devront faire l’objet d’un réexport après transformation. Par contre, comme dans l’approche A, il faudra prévoir une conversion des variables labellisées au moment de l’analyse.</p>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Avertissement
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dans tous les cas, il est recommandé d’adopter l’une ou l’autre approche, mais d’éviter de mélanger les différents types de vecteur. Une organisation rigoureuse de ses données et de son code est essentielle&nbsp;!</p>
</div>
</div>
</section><section id="convertir-un-vecteur-labellisé-en-facteur" class="level3 page-columns page-full" data-number="12.4.2"><h3 data-number="12.4.2" class="anchored" data-anchor-id="convertir-un-vecteur-labellisé-en-facteur">
<span class="header-section-number">12.4.2</span> Convertir un vecteur labellisé en facteur</h3>
<div class="page-columns page-full"><p>Il est très facile de convertir un vecteur labellisé en facteur à l’aide la fonction <code><a href="http://larmarange.github.io/labelled/reference/to_factor.html">labelled::to_factor()</a></code> du package <a href="http://larmarange.github.io/labelled/">labelled</a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;On priviligiera la fonction <code><a href="http://larmarange.github.io/labelled/reference/to_factor.html">labelled::to_factor()</a></code> à la fonction <code><a href="https://forcats.tidyverse.org/reference/as_factor.html">haven::as_factor()</a></code> de l’extension <a href="https://haven.tidyverse.org">haven</a>, la première ayant plus de possibilités et un comportement plus consistent.</p></li></div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">9</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="cn">NA</span>)</span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="fu">val_labels</span>(v) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb38-3"><a href="#cb38-3"></a>  <span class="at">oui =</span> <span class="dv">1</span>, <span class="st">"peut-être"</span> <span class="ot">=</span> <span class="dv">2</span>, </span>
<span id="cb38-4"><a href="#cb38-4"></a>  <span class="at">non =</span> <span class="dv">3</span>, <span class="st">"ne sait pas"</span> <span class="ot">=</span> <span class="dv">9</span></span>
<span id="cb38-5"><a href="#cb38-5"></a>)</span>
<span id="cb38-6"><a href="#cb38-6"></a>v</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;labelled&lt;double&gt;[7]&gt;
[1]  1  2  9  3  3  2 NA

Labels:
 value       label
     1         oui
     2   peut-être
     3         non
     9 ne sait pas</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="fu">to_factor</span>(v)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] oui         peut-être   ne sait pas non         non         peut-être  
[7] &lt;NA&gt;       
Levels: oui peut-être non ne sait pas</code></pre>
</div>
</div>
<p>Il possible d’indiquer si l’on souhaite, comme étiquettes du facteur, utiliser les étiquettes de valeur (par défaut), les valeurs elles-mêmes, ou bien les étiquettes de valeurs préfixées par la valeur d’origine indiquée entre crochets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="fu">to_factor</span>(v, <span class="st">'l'</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] oui         peut-être   ne sait pas non         non         peut-être  
[7] &lt;NA&gt;       
Levels: oui peut-être non ne sait pas</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a><span class="fu">to_factor</span>(v, <span class="st">'v'</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1    2    9    3    3    2    &lt;NA&gt;
Levels: 1 2 3 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="fu">to_factor</span>(v, <span class="st">'p'</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] [1] oui         [2] peut-être   [9] ne sait pas [3] non        
[5] [3] non         [2] peut-être   &lt;NA&gt;           
Levels: [1] oui [2] peut-être [3] non [9] ne sait pas</code></pre>
</div>
</div>
<p>Par défaut, les modalités du facteur seront triées selon l’ordre des étiquettes de valeur. Mais cela peut être modifié avec l’argument <code>sort_levels</code> si l’on préfère trier selon les valeurs ou selon l’ordre alphabétique des étiquettes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a><span class="fu">to_factor</span>(v, <span class="at">sort_levels =</span> <span class="st">'v'</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] oui         peut-être   ne sait pas non         non         peut-être  
[7] &lt;NA&gt;       
Levels: oui peut-être non ne sait pas</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="fu">to_factor</span>(v, <span class="at">sort_levels =</span> <span class="st">'l'</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] oui         peut-être   ne sait pas non         non         peut-être  
[7] &lt;NA&gt;       
Levels: ne sait pas non oui peut-être</code></pre>
</div>
</div>
</section><section id="convertir-un-vecteur-labellisé-en-numérique-ou-en-texte" class="level3" data-number="12.4.3"><h3 data-number="12.4.3" class="anchored" data-anchor-id="convertir-un-vecteur-labellisé-en-numérique-ou-en-texte">
<span class="header-section-number">12.4.3</span> Convertir un vecteur labellisé en numérique ou en texte</h3>
<p>Pour rappel, il existe deux types de vecteurs labellisés : des vecteurs numériques labellisés (<code>x</code> dans l’exemple ci-dessous) et des vecteurs textuels labellisés (<code>y</code> dans l’exemple ci-dessous).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="cn">NA</span>)</span>
<span id="cb52-2"><a href="#cb52-2"></a><span class="fu">val_labels</span>(x) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb52-3"><a href="#cb52-3"></a>  <span class="at">oui =</span> <span class="dv">1</span>, <span class="st">"peut-être"</span> <span class="ot">=</span> <span class="dv">2</span>, </span>
<span id="cb52-4"><a href="#cb52-4"></a>  <span class="at">non =</span> <span class="dv">3</span>, <span class="st">"ne sait pas"</span> <span class="ot">=</span> <span class="dv">9</span></span>
<span id="cb52-5"><a href="#cb52-5"></a>)</span>
<span id="cb52-6"><a href="#cb52-6"></a>  </span>
<span id="cb52-7"><a href="#cb52-7"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"f"</span>, <span class="st">"f"</span>, <span class="st">"h"</span>, <span class="st">"f"</span>)</span>
<span id="cb52-8"><a href="#cb52-8"></a><span class="fu">val_labels</span>(y) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">femme =</span> <span class="st">"f"</span>, <span class="at">homme =</span> <span class="st">"h"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pour leur retirer leur caractère <q>labellisé</q> et revenir à leur classe d’origine, on peut utiliser la fonction <code><a href="https://rdrr.io/r/base/class.html">unclass()</a></code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="fu">unclass</span>(x)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1  2  9  3  3  2 NA
attr(,"labels")
        oui   peut-être         non ne sait pas 
          1           2           3           9 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a><span class="fu">unclass</span>(y)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "f" "f" "h" "f"
attr(,"labels")
femme homme 
  "f"   "h" </code></pre>
</div>
</div>
<p>À noter que dans ce cas-là, les étiquettes sont conservées comme attributs du vecteur.</p>
<p>Une alternative est d’utiliser <code><a href="http://larmarange.github.io/labelled/reference/remove_labels.html">labelled::remove_labels()</a></code> qui supprimera toutes les étiquettes, y compris les étiquettes de variable. Pour conserver les étiquettes de variables et ne supprimer que les étiquettes de valeurs, on indiquera <code>keep_var_label = TRUE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a><span class="fu">var_label</span>(x) <span class="ot">&lt;-</span> <span class="st">"Etiquette de variable"</span></span>
<span id="cb57-2"><a href="#cb57-2"></a><span class="fu">remove_labels</span>(x)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1  2  9  3  3  2 NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a><span class="fu">remove_labels</span>(x, <span class="at">keep_var_label =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1  2  9  3  3  2 NA
attr(,"label")
[1] "Etiquette de variable"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a><span class="fu">remove_labels</span>(y)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "f" "f" "h" "f"</code></pre>
</div>
</div>
<p>Dans le cas d’un vecteur numérique labellisé que l’on souhaiterait convertir en variable textuelle, on pourra utiliser <code><a href="http://larmarange.github.io/labelled/reference/to_character.html">labelled::to_character()</a></code> à la place de <code><a href="http://larmarange.github.io/labelled/reference/to_factor.html">labelled::to_factor()</a></code> qui, comme sa grande soeur, utilisera les étiquettes de valeurs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a><span class="fu">to_character</span>(x)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "oui"         "peut-être"   "ne sait pas" "non"         "non"        
[6] "peut-être"   NA           
attr(,"label")
[1] "Etiquette de variable"</code></pre>
</div>
</div>
</section><section id="conversion-conditionnelle-en-facteurs" class="level3" data-number="12.4.4"><h3 data-number="12.4.4" class="anchored" data-anchor-id="conversion-conditionnelle-en-facteurs">
<span class="header-section-number">12.4.4</span> Conversion conditionnelle en facteurs</h3>
<p>Il n’est pas toujours possible de déterminer la nature d’une variable (continue ou catégorielle) juste à partir de la présence ou l’absence d’étiquettes de valeur. En effet, on peut utiliser des étiquettes de valeur dans le cadre d’une variable continue pour indiquer certaines valeurs spécifiques.</p>
<p>Une bonne pratique est de vérifier chaque variable inclue dans une analyse, une à une.</p>
<p>Cependant, une règle qui fonctionne dans 90% des cas est de convertir un vecteur labellisé en facteur si et seulement si toutes les valeurs observées dans le vecteur disposent d’une étiquette de valeur correspondante. C’est ce que propose la fonction <code><a href="http://larmarange.github.io/labelled/reference/to_factor.html">labelled::unlabelled()</a></code> qui peut même être appliqué à tout un tableau de données. Par défaut, elle fonctionne ainsi :</p>
<ol type="1">
<li>les variables non labellisées restent inchangées (variables <em>f</em> et <em>g</em> dans l’exemple ci-dessous);</li>
<li>si toutes les valeurs observées d’une variable labellisées ont une étiquette, elles sont converties en facteurs (variables <em>b</em> et <em>c</em>);</li>
<li>sinon, on leur applique <code><a href="https://rdrr.io/r/base/class.html">base::unclass()</a></code> (variables <em>a</em>, <em>d</em> et <em>e</em>).</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a>df <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb65-2"><a href="#cb65-2"></a>  <span class="at">a =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb65-3"><a href="#cb65-3"></a>  <span class="at">b =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb65-4"><a href="#cb65-4"></a>  <span class="at">c =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>),</span>
<span id="cb65-5"><a href="#cb65-5"></a>  <span class="at">d =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>),</span>
<span id="cb65-6"><a href="#cb65-6"></a>  <span class="at">e =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb65-7"><a href="#cb65-7"></a>  <span class="at">f =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,</span>
<span id="cb65-8"><a href="#cb65-8"></a>  <span class="at">g =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(</span>
<span id="cb65-9"><a href="#cb65-9"></a>    <span class="st">"2020-01-01"</span>, <span class="st">"2020-02-01"</span>, </span>
<span id="cb65-10"><a href="#cb65-10"></a>    <span class="st">"2020-03-01"</span>, <span class="st">"2020-04-01"</span></span>
<span id="cb65-11"><a href="#cb65-11"></a>  ))</span>
<span id="cb65-12"><a href="#cb65-12"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb65-13"><a href="#cb65-13"></a>  <span class="fu">set_value_labels</span>(</span>
<span id="cb65-14"><a href="#cb65-14"></a>    <span class="at">a =</span> <span class="fu">c</span>(<span class="at">No =</span> <span class="dv">1</span>, <span class="at">Yes =</span> <span class="dv">2</span>),</span>
<span id="cb65-15"><a href="#cb65-15"></a>    <span class="at">b =</span> <span class="fu">c</span>(<span class="at">No =</span> <span class="dv">1</span>, <span class="at">Yes =</span> <span class="dv">2</span>, <span class="at">DK =</span> <span class="dv">3</span>),</span>
<span id="cb65-16"><a href="#cb65-16"></a>    <span class="at">c =</span> <span class="fu">c</span>(<span class="at">No =</span> <span class="dv">1</span>, <span class="at">Yes =</span> <span class="dv">2</span>, <span class="at">DK =</span> <span class="dv">3</span>),</span>
<span id="cb65-17"><a href="#cb65-17"></a>    <span class="at">d =</span> <span class="fu">c</span>(<span class="at">No =</span> <span class="st">"a"</span>, <span class="at">Yes =</span> <span class="st">"b"</span>),</span>
<span id="cb65-18"><a href="#cb65-18"></a>    <span class="at">e =</span> <span class="fu">c</span>(<span class="at">No =</span> <span class="dv">1</span>, <span class="at">Yes =</span> <span class="dv">2</span>)</span>
<span id="cb65-19"><a href="#cb65-19"></a>  )</span>
<span id="cb65-20"><a href="#cb65-20"></a>df <span class="sc">|&gt;</span> <span class="fu">look_for</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> pos variable label col_type values 
 1   a        —     dbl+lbl  [1] No 
                             [2] Yes
 2   b        —     dbl+lbl  [1] No 
                             [2] Yes
                             [3] DK 
 3   c        —     dbl+lbl  [1] No 
                             [2] Yes
                             [3] DK 
 4   d        —     chr+lbl  [a] No 
                             [b] Yes
 5   e        —     dbl+lbl  [1] No 
                             [2] Yes
 6   f        —     int             
 7   g        —     date            </code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a><span class="fu">to_factor</span>(df) <span class="sc">|&gt;</span> <span class="fu">look_for</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> pos variable label col_type values
 1   a        —     fct      No    
                             Yes   
                             3     
 2   b        —     fct      No    
                             Yes   
                             DK    
 3   c        —     fct      No    
                             Yes   
                             DK    
 4   d        —     fct      No    
                             Yes   
                             c     
 5   e        —     fct      No    
                             Yes   
                             9     
 6   f        —     int            
 7   g        —     date           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a><span class="fu">unlabelled</span>(df) <span class="sc">|&gt;</span> <span class="fu">look_for</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> pos variable label col_type values
 1   a        —     dbl            
 2   b        —     fct      No    
                             Yes   
                             DK    
 3   c        —     fct      No    
                             Yes   
                             DK    
 4   d        —     chr            
 5   e        —     dbl            
 6   f        —     int            
 7   g        —     date           </code></pre>
</div>
</div>
<p>On peut indiquer certaines options, par exemple <code>drop_unused_labels = TRUE</code> pour supprimer des facteurs créés les niveaux non observées dans les données (voir la variable <em>c</em>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a><span class="fu">unlabelled</span>(df, <span class="at">drop_unused_labels =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb71-2"><a href="#cb71-2"></a>  <span class="fu">look_for</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> pos variable label col_type values
 1   a        —     dbl            
 2   b        —     fct      No    
                             Yes   
                             DK    
 3   c        —     fct      No    
                             Yes   
 4   d        —     chr            
 5   e        —     dbl            
 6   f        —     int            
 7   g        —     date           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a><span class="fu">unlabelled</span>(df, <span class="at">levels =</span> <span class="st">"prefixed"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb73-2"><a href="#cb73-2"></a>  <span class="fu">look_for</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> pos variable label col_type values 
 1   a        —     dbl             
 2   b        —     fct      [1] No 
                             [2] Yes
                             [3] DK 
 3   c        —     fct      [1] No 
                             [2] Yes
                             [3] DK 
 4   d        —     chr             
 5   e        —     dbl             
 6   f        —     int             
 7   g        —     date            </code></pre>
</div>
</div>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><script src="https://giscus.app/client.js" data-repo="larmarange/guide-R" data-repo-id="R_kgDOH6-xnw" data-category="Forum" data-category-id="DIC_kwDOH6-xn84CRLQy" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="fr" crossorigin="anonymous" data-loading="lazy" async="">
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../manipulation/etiquettes-variables.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Étiquettes de variables</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../manipulation/valeurs-manquantes.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Valeurs manquantes</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
<li class="nav-item">
 guide-R : Guide pour l'analyse de données d'enquêtes avec R
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
      <i class="bi bi-cc-circle" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>   
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link active" href="https://github.com/larmarange/guide-R/" aria-current="page">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/c/webinR">
      <i class="bi bi-youtube" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://larmarange.github.io/analyse-R/">analyse-R</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://larmarange.github.io/webin-R/">webin-R</a>
  </li>  
</ul>
</div>
  </div>
</footer><script>var lightboxQuarto = GLightbox({"loop":true,"openEffect":"zoom","selector":".lightbox","closeEffect":"zoom","descPosition":"bottom"});</script>


<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>